<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SA Smart Traffic - Enforcement Suite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .step-content { display: none; }
        .step-content.active { display: block; }
        .sa-green { background-color: #007a4d; }
        .sa-blue { background-color: #002395; }
        .scan-line {
            height: 2px;
            background: #007a4d;
            box-shadow: 0 0 15px #007a4d;
            animation: move-line 2s infinite linear;
            position: absolute;
            width: 100%;
        }
        @keyframes move-line { 0% { top: 0%; } 100% { top: 100%; } }
        .violation-checkbox:checked + label {
            background-color: #fef2f2;
            border-color: #ef4444;
        }
    </style>
</head>
<body class="bg-slate-100 font-sans antialiased pb-24">

    <header class="sa-green text-white p-4 shadow-xl sticky top-0 z-50 flex justify-between items-center">
        <div class="flex items-center gap-3">
            <h1 class="font-bold text-sm leading-tight">OFFICIAL ENFORCEMENT<br><span class="text-[10px] opacity-80">RTMC / SAPS CONNECTED</span></h1>
        </div>
        <div class="text-right">
            <p class="text-[10px] font-mono bg-black/20 px-2 py-1 rounded">REF: 2026-TX-091</p>
        </div>
    </header>

    <main class="max-w-md mx-auto p-4">

        <section id="step-1" class="step-content active">
            <div class="bg-white p-6 rounded-3xl shadow-sm mb-4">
                <span class="text-[10px] font-black sa-blue text-white px-2 py-1 rounded">STEP 1</span>
                <h2 class="text-xl font-black mt-2 mb-1">Vehicle License Disc</h2>
                <p class="text-xs text-gray-500 mb-4">Scan MVLX disc on windscreen</p>
                <div class="relative h-48 bg-slate-900 rounded-2xl overflow-hidden mb-4">
                    <div class="scan-line"></div>
                    <div class="absolute inset-0 flex items-center justify-center text-white/20 text-4xl font-black">SCANNING</div>
                </div>
                <button onclick="simulateDiscScan()" id="disc-btn" class="w-full sa-blue text-white py-4 rounded-2xl font-black">START VEHICLE SCAN</button>
                <div id="disc-result" class="hidden mt-4 p-4 bg-green-50 rounded-xl border border-green-200">
                    <p class="text-xs font-bold text-green-700">VEHICLE IDENTIFIED: GP 22 RR GP</p>
                    <p class="text-[10px] text-green-600">Make/Model: VW Polo Vivo (White)</p>
                </div>
            </div>
        </section>

        <section id="step-2" class="step-content">
            <div class="bg-white p-6 rounded-3xl shadow-sm mb-4">
                <span class="text-[10px] font-black sa-blue text-white px-2 py-1 rounded">STEP 2</span>
                <h2 class="text-xl font-black mt-2 mb-1">Driver's License</h2>
                <p class="text-xs text-gray-500 mb-4">Scan front of South African DL Card</p>
                <div class="relative h-48 bg-slate-800 rounded-2xl overflow-hidden mb-4 border-2 border-dashed border-slate-300">
                    <div class="scan-line"></div>
                </div>
                <button onclick="simulateDriverScan()" id="driver-btn" class="w-full sa-green text-white py-4 rounded-2xl font-black">SCAN LICENSE CARD</button>
            </div>
        </section>

        <section id="step-3" class="step-content">
            <div class="bg-white p-6 rounded-3xl shadow-sm mb-4">
                <h2 class="text-xl font-black mb-1">Inspection Results</h2>
                <p class="text-xs text-gray-500 mb-6">Select all applicable violations</p>
                
                <div class="space-y-3" id="violation-list">
                    <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest mt-4">Documentation</p>
                    <div class="relative">
                        <input type="checkbox" id="v1" class="violation-checkbox hidden" data-fine="1250" onchange="calculateTotal()">
                        <label for="v1" class="flex justify-between p-4 border-2 rounded-xl cursor-pointer hover:border-blue-500 transition-all">
                            <span class="text-sm font-bold">Expired License Disc</span>
                            <span class="text-sm font-mono">R1,250</span>
                        </label>
                    </div>
                    <div class="relative">
                        <input type="checkbox" id="v2" class="violation-checkbox hidden" data-fine="1000" onchange="calculateTotal()">
                        <label for="v2" class="flex justify-between p-4 border-2 rounded-xl cursor-pointer hover:border-blue-500 transition-all">
                            <span class="text-sm font-bold">Unlicensed Driver</span>
                            <span class="text-sm font-mono">R1,000</span>
                        </label>
                    </div>

                    <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest mt-4">Vehicle Defects</p>
                    <div class="relative">
                        <input type="checkbox" id="v3" class="violation-checkbox hidden" data-fine="500" onchange="calculateTotal()">
                        <label for="v3" class="flex justify-between p-4 border-2 rounded-xl cursor-pointer hover:border-blue-500 transition-all">
                            <span class="text-sm font-bold">Smooth Tyres (Per Tyre)</span>
                            <span class="text-sm font-mono">R500</span>
                        </label>
                    </div>
                    <div class="relative">
                        <input type="checkbox" id="v4" class="violation-checkbox hidden" data-fine="250" onchange="calculateTotal()">
                        <label for="v4" class="flex justify-between p-4 border-2 rounded-xl cursor-pointer hover:border-blue-500 transition-all">
                            <span class="text-sm font-bold">Broken Headlight/Indicator</span>
                            <span class="text-sm font-mono">R250</span>
                        </label>
                    </div>
                </div>

                <div class="mt-8 pt-6 border-t-2 border-slate-100">
                    <div class="flex justify-between items-center mb-6">
                        <span class="text-lg font-black italic">TOTAL FINE:</span>
                        <span id="total-amount" class="text-3xl font-black text-red-600">R0.00</span>
                    </div>
                    <button onclick="issueFine()" class="w-full bg-red-600 text-white py-5 rounded-2xl font-black shadow-lg shadow-red-900/20">ISSUE DIGITAL FINE</button>
                    <button onclick="nextStep(4)" class="w-full mt-3 text-slate-400 font-bold py-2">No Violations (Clear)</button>
                </div>
            </div>
        </section>

        <section id="step-4" class="step-content">
            <h2 class="text-2xl font-black mb-6">Shift Summary</h2>
            <div class="bg-white p-6 rounded-3xl shadow-sm mb-6">
                <div class="flex justify-between items-end h-24 gap-2">
                    <div class="flex-1 bg-slate-100 rounded-t-lg h-[40%] sa-green opacity-50"></div>
                    <div class="flex-1 bg-slate-100 rounded-t-lg h-[60%] sa-green opacity-50"></div>
                    <div class="flex-1 bg-slate-100 rounded-t-lg h-[90%] sa-blue"></div>
                </div>
                <p class="text-center text-[10px] font-bold text-slate-400 mt-4 uppercase">Stop Volume (Hourly)</p>
            </div>
            <button onclick="location.reload()" class="w-full sa-green text-white py-4 rounded-2xl font-black">NEW STOP</button>
        </section>

    </main>

    <script>
        function nextStep(stepNum) {
            document.querySelectorAll('.step-content').forEach(s => s.classList.remove('active'));
            document.getElementById(`step-${stepNum}`).classList.add('active');
            window.scrollTo(0,0);
        }

        function simulateDiscScan() {
            const btn = document.getElementById('disc-btn');
            btn.innerHTML = "CHECKING eNaTIS...";
            setTimeout(() => {
                document.getElementById('disc-result').classList.remove('hidden');
                btn.innerHTML = "NEXT: SCAN DRIVER";
                btn.onclick = () => nextStep(2);
            }, 1500);
        }

        function simulateDriverScan() {
            const btn = document.getElementById('driver-btn');
            btn.innerHTML = "VERIFYING ID...";
            setTimeout(() => {
                nextStep(3);
            }, 1500);
        }

        function calculateTotal() {
            let total = 0;
            const checkboxes = document.querySelectorAll('.violation-checkbox:checked');
            checkboxes.forEach(cb => {
                total += parseInt(cb.getAttribute('data-fine'));
            });
            document.getElementById('total-amount').innerText = `R${total.toLocaleString()}`;
        }

        function issueFine() {
            const total = document.getElementById('total-amount').innerText;
            if(total === "R0") {
                alert("Please select at least one violation.");
                return;
            }
            alert(`Fine of ${total} issued and sent to driver via SMS/Email. Logged to AARTO.`);
            nextStep(4);
        }
    </script>
</body>
</html>
